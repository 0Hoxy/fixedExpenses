##### **요구사항 상세 명세: 1. 대시보드 및 핵심 UI**


**1.1 월별 요약 정보 (Monthly Summary Information)**

대시보드 최상단에 위치하여 사용자가 앱 실행 즉시 핵심 정보를 파악할 수 있도록 하는 영역입니다.

**1.1.1 이번 달 총 고정지출**

- **설명:** 현재 월(예: 9월)에 결제일이 포함된 모든 고정지출 항목의 합계 금액을 표시합니다.
- **표시 형식:** "9월 고정지출"과 같은 타이틀과 함께, 크고 굵은 글씨로 금액(예: `1,234,500원`)을 표시합니다. 월은 자동으로 현재 월에 맞게 변경되어야 합니다.
- **데이터 기준:** 등록된 지출 항목 중, '결제일'이 현재 달의 1일부터 말일 사이에 포함된 모든 항목의 합계.
- **예외 처리:** 해당 월에 지출 항목이 없을 경우, `0원`으로 표시됩니다.

**1.1.2 지난달 비교 메시지**

- **설명:** 이번 달 총 고정지출을 지난달 총 고정지출과 비교하여 변동 폭을 알려주는 동적 텍스트 메시지입니다.

- **계산 로직:** `(이번 달 총액) - (지난달 총액)`

- **표시 조건 및 문구:**

- **지출 증가 시:** "이전 달보다 `N원` 더 지출하고 있어요." (긍정적이지 않은 뉘앙스의 색상(예: 주황색) 사용 고려)
- **지출 감소 시:** "이전 달보다 `N원` 절약하고 있어요." (긍정적 뉘앙스의 색상(예: 파란색) 사용 고려)
- **지출 동일 시:** "이전 달과 지출이 같아요."
- **지난달 데이터 부재 시(앱 첫 사용 월 등):** 해당 메시지 영역은 표시되지 않아야 합니다.

**1.1.3 가장 가까운 결제 예정 건 (Upcoming Payment)**

- **설명:** 오늘 날짜를 기준으로, 이번 달에 남은 결제 건 중 가장 빨리 다가오는 항목 1~2개를 요약하여 보여줍니다.

- **표시 정보:** `항목명`, `결제액`, `남은 기간(D-day)` (예: "넷플릭스 | 17,000원 | 3일 후" 또는 "9월 18일 결제")

- **데이터 기준:** 오늘 이후의 날짜이면서, 현재 월에 포함된 결제일 중 가장 이른 순서.

- **예외 처리:** 이번 달의 모든 결제가 완료되었을 경우, "이번 달 결제가 모두 완료되었어요." 와 같은 메시지를 표시합니다.

**1.1.4 카테고리별 지출 비중 그래프**

- **설명:** 이번 달 총 고정지출에서 각 카테고리가 차지하는 비중을 시각적으로 보여주는 원형 또는 도넛형 차트입니다.
- **기능:**
- 각 조각은 카테고리를 나타내며, 조각의 크기는 지출 비중에 비례합니다.
- 차트와 함께 상위 3~5개 카테고리의 `범례`(카테고리명과 색상)를 표시합니다.
- **인터랙션:** 특정 카테고리 조각을 터치하면 해당 카테고리명과 정확한 지출액(예: "통신비: 152,000원")이 하이라이트 되어 표시됩니다.
- **데이터 처리:** 카테고리 수가 많을 경우, 지출 비중이 낮은 항목들은 '기타'로 통합하여 그래프를 간결하게 유지합니다.

**1.2 캘린더 뷰 (Calendar View)**

- **1.2.1 기본 구성**

- **설명:** 월별 달력 형태로, 고정지출이 예정된 날짜를 시각적으로 표시합니다.
- **네비게이션:** 좌우 스와이프(Swipe) 또는 버튼을 통해 이전 달, 다음 달로 쉽게 이동할 수 있어야 합니다.
- **1.2.2 결제일 표시**

- **설명:** 결제가 예정된 날짜에 아이콘 등 시각적 표식을 추가합니다.
- **디자인 고려:** 결제 건수가 여러 개인 날은 표식을 다르게(예: 여러 개의 점 또는 여러개의 아이콘) 하여 구분할 수 있도록 고려합니다.
- **1.2.3 날짜 선택 및 상세 내역 조회**

- **설명:** 사용자가 특정 날짜를 선택했을 때의 동작을 정의합니다.
- **동작:**

  - **결제가 있는 날짜 선택 시:** 달력 하단이나 팝업창을 통해 해당 날짜에 결제될 모든 항목의 목록(항목명, 금액)을 보여줍니다.
  - **결제가 없는 날짜 선택 시:** "예정된 지출이 없습니다."와 같은 메시지를 표시합니다.

- **1.2.4 지출 없는 날(No-Spend Day) 표시**

- **설명:** 고정지출 결제가 없는 날을 시각적으로 인지할 수 있도록 미묘한 스타일을 적용합니다.
- **구현:** 해당 날짜의 숫자를 연한 회색으로 처리하거나, 배경색에 미세한 차이를 두어 사용자가 '지출로부터 자유로운 날'임을 인지할 수 있도록 합니다.

**1.3 대시보드 개인화 (Dashboard Personalization)**

**1.3.1 편집 모드 진입**

- **설명:** 사용자가 대시보드의 구성을 변경할 수 있는 '편집 모드'로 진입하는 기능을 제공합니다.
- **UI:** 대시보드 우측 상단 등에 '편집' 버튼 또는 설정 아이콘을 배치합니다.

**1.3.2 컴포넌트 순서 변경**

- **설명:** 편집 모드에서 각 정보 블록(월별 요약, 캘린더 뷰 등)의 순서를 사용자가 원하는 대로 변경할 수 있습니다.
- **구현:** 길게 누른 후 드래그 앤 드롭(Drag and Drop) 방식으로 직관적인 순서 변경을 지원합니다.

**1.3.3 컴포넌트 표시 여부 설정**

- **설명:** 편집 모드에서 사용자가 보지 않고 싶은 정보 블록을 숨길 수 있는 기능을 제공합니다.
- **UI:** 각 컴포넌트 카드에 '숨기기' 토글 버튼 또는 'X' 아이콘을 제공합니다.
- **재설정:** 설정 메뉴 등에서 숨겨진 컴포넌트를 다시 표시할 수 있는 옵션을 제공해야 합니다

##### **요구사항 상세 명세: 2. 데이터 입력 및 관리**

사용자가 고정지출 내역을 생성, 조회, 수정, 삭제(CRUD)하는 핵심 기능 영역입니다. 직관적이고 오류 없는 데이터 관리를 목표로 합니다.

#### **2.1 기본 지출 입력 및 관리 (CRUD Operations)**

- **2.1.1 지출 항목 생성 (Create)**
  - **접근 방식:** 메인 화면의 플로팅 액션 버튼(+)을 통해 신규 지출 입력 화면으로 진입합니다.
  - **입력 필드 (Fields):**
    - **항목명 (필수):** 지출을 식별할 수 있는 이름 (텍스트 입력, 예: KT 인터넷).
    - **금액 (필수):** 지출 금액 (숫자 입력, 통화 형식 자동 적용).
    - **결제일 (필수):**
      - **매월:** `매월 O일` 형식으로 일자만 선택 (예: 25일).
      - **매년:** `매년 O월 O일` 형식으로 월과 일자를 함께 선택 (예: 9월 15일).
    - **카테고리 (필수):**
      - 기본 제공 카테고리(`통신비`, `OTT`, `보험료` 등) 목록에서 선택.
      - 목록 내에 `+ 새 카테고리 추가` 버튼을 두어, 즉시 새로운 카테고리를 생성할 수 있는 기능 제공.
    - **결제 주기 (선택):** 기본값은 `매월`. `매년`, `격월`, `분기별`(3개월), `반기별`(6개월) 등 선택 가능.
    - **결제 수단 (선택):** 사용자가 미리 등록한 결제수단 목록에서 선택.
    - **메모 (선택):** 추가 정보를 기록할 수 있는 여러 줄 텍스트 입력란.
  - **저장:** `저장` 버튼을 누르면 유효성 검사(필수 항목 입력 여부 등) 후 데이터가 저장되고 목록 화면으로 돌아갑니다.
- **2.1.2 지출 항목 조회 및 수정 (Read & Update)**
  - **접근 방식:** 목록에서 특정 아이콘을 선택하면 상세 조회 화면으로 이동합니다.
  - **기능:** 상세 조회 화면에서 `수정` 버튼을 눌러 항목 생성 시와 동일한 입력 폼을 통해 정보를 변경할 수 있습니다.
- **2.1.3 지출 항목 삭제 (Delete)**
  - **기능:** 상세 조회 화면 또는 목록의 옵션 메뉴를 통해 `삭제` 기능을 제공합니다.
  - **안전장치:** 삭제 시 "정말 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다."와 같은 확인 대화상자(Confirmation Dialog)를 반드시 표시하여 사용자 실수를 방지합니다.
- **2.1.4 사용자 정의 카테고리 관리**
  - **접근 방식:** 앱의 메인 `설정` 메뉴 안에 `카테고리 관리` 화면을 별도로 제공합니다.
  - **기능:** 카테고리 이름 변경, 아이콘/색상 변경, 생성, 삭제 기능을 제공합니다.
  - **예외 처리:** 이미 특정 지출 항목에 할당된 카테고리를 삭제하려고 할 경우, "해당 카테고리에 N개의 지출 항목이 있습니다. 항목들을 다른 카테고리로 이동시키거나 삭제해야 합니다." 와 같은 안내를 통해 데이터 유실을 방지합니다.

#### **2.2 납부 완료 처리 (Payment Completion Handling)**

- **2.2.1 UI 및 인터랙션 (수정된 내용)**

  - **방식:** 메인 지출 목록에서 스와이프 제스처(Swipe Gesture)를 통해 납부 완료 처리를 수행합니다. 평상시에는 화면에 별도의 버튼이나 체크박스가 노출되지 않아 깔끔한 UI를 유지합니다.
  - **동작:**
    1.  사용자가 목록의 특정 항목을 **오른쪽으로 스와이프**하면, 항목 뒤에 숨겨져 있던 액션 영역이 나타납니다.
    2.  액션 영역에는 시각적 피드백(예: 녹색 배경)과 함께 **"납부 완료" 텍스트 및 아이콘(✔)**이 표시됩니다.
    3.  사용자가 손을 떼면 해당 항목은 '납부 완료' 상태로 전환되며, 시각적으로 구분되도록 처리됩니다 (예: 항목 전체가 회색으로 변경, 취소선 적용).
  - **실행 취소 (Undo) 기능:**
    - 사용자의 실수를 방지하기 위해, 작업 완료 직후 화면 하단에 "납부가 완료되었습니다." 라는 메시지와 함께 **[실행 취소]** 버튼이 포함된 스낵바(Snackbar)를 몇 초간 표시합니다. 사용자가 '실행 취소'를 누르면 즉시 이전 상태로 복구됩니다.

- **2.2.2 데이터 처리**
  - 이 기능은 해당 월의 '납부 여부' 상태만 변경하며, 원본 데이터(금액, 날짜 등)에는 영향을 주지 않습니다.
  - 대시보드 등에 '납부 완료 금액 / 총액' 형태로 진행 상태를 표시하는 데 활용될 수 있습니다.
- **2.2.3 월별 납부 상태 관리 (수정된 내용)**

  - **설명:** 납부 완료 상태는 월별로 독립적으로 기록 및 관리되어야 합니다. `고정지출_마스터` 데이터의 상태를 직접 변경하지 않습니다.
  - **동작:** 월이 변경되면(예: 9월 30일 → 10월 1일), 앱은 새로운 월의 납부 기록을 기준으로 목록을 표시합니다. 따라서 별도의 '데이터 초기화' 작업 없이 모든 항목이 자연스럽게 '미납' 상태로 보이게 됩니다. 이를 통해 과거의 모든 납부 기록은 안전하게 보존됩니다.

#### **2.3 항목별 히스토리 및 메모 로그 (Item-specific History Log)**

- **2.3.1 접근 방식:** 지출 항목 상세 조회 화면 내에 `히스토리` 탭 또는 버튼을 통해 접근합니다.
- **2.3.2 표시 내용:** 해당 항목과 관련된 모든 변경사항 및 메모를 시간 역순(최신순)으로 보여줍니다.
  - `2025-09-15`: 금액이 `79,000원`에서 `89,000원`으로 변경되었습니다. (시스템 자동 기록)
  - `2025-08-25`: "요금제 변경으로 인한 금액 인상" (사용자 수동 메모)
- **2.3.3 로그 생성:**
  - **자동 생성:** 금액 등 주요 정보가 '수정'될 때마다 시스템이 자동으로 로그를 생성합니다.
  - **수동 생성:** 사용자가 `메모 추가` 기능을 통해 직접 텍스트 로그를 남길 수 있습니다.

#### **2.4 지출 일시정지 및 재활성화 (수정된 내용)**

- **2.4.1 UI 및 인터랙션 (User Interface & Interaction)**

  - **일시정지 (Pausing an Item):**
    - **주요 방식 (Primary):** 메인 지출 목록에서 활성 상태인 항목을 **왼쪽으로 스와이프**합니다. 이때 나타나는 액션 영역의 **'일시정지(⏸️)'** 옵션을 선택하여 상태를 변경합니다.
    - **보조 방식 (Secondary):** 지출 항목의 상세/수정 화면에 있는 토글 스위치를 통해서도 '일시정지'할 수 있습니다.
  - **재활성화 (Reactivating an Item):**
    - **주요 방식 (Primary):** 목록에서 '일시정지' 상태인 항목을 다시 **왼쪽으로 스와이프**합니다. 이때 나타나는 액션 영역의 **'다시 시작(▶️)'** 옵션을 선택하여 상태를 변경합니다.
    - **보조 방식 (Secondary):** 상세/수정 화면의 토글 스위치를 통해서도 재활성화할 수 있습니다.

- **2.4.2 시스템 동작 및 데이터 관리 (System Behavior & Data Management)**

  - **상태 이력 관리:**
    - 모든 '일시정지' 및 '재활성화' 액션은 **해당 액션이 적용되는 '월(YYYY-MM)'을 기준**으로 이력에 기록됩니다. 이를 통해 단순한 현재 상태가 아닌, 시점별 상태 변화를 관리합니다.
  - **계산 로직 (Inclusion/Exclusion in Totals):**
    - **일시정지 시:** 사용자가 특정 항목을 **N월**에 '일시정지'하면, 해당 항목은 **N월을 포함한 모든 미래의 월**에 대한 총액, 리포트 등 모든 금액 합산에서 제외됩니다. N월 이전의 과거 데이터는 영향을 받지 않습니다.
    - **재활성화 시:** 사용자가 항목을 **M월**에 '재활성화'하면, 해당 항목은 **M월을 포함한 모든 미래의 월**의 금액 합산에 다시 포함됩니다. 일시정지 기간이었던 과거(예: M-1월)의 데이터는 영향을 받지 않습니다.
  - **목록 표시 로직 (Dynamic List Display):**
    - 목록에 표시되는 항목의 상태(활성/비활성)는 **사용자가 현재 조회하고 있는 월을 기준**으로 동적으로 결정됩니다.
    - **예시:** 5월에 일시정지한 항목은 5월 이후의 월별 목록에서는 '일시정지' 스타일로 표시되지만, 사용자가 4월 목록을 조회할 때는 '활성' 상태로 정상 표시됩니다.
    - **UI 제한:** 현재 조회 중인 월에서 항목이 '일시정지' 상태일 경우, 해당 항목에 대한 '납부 완료(오른쪽 스와이프)' 기능은 비활성화됩니다.

#### **2.5 태그(Tag) 기능 (Tagging Feature)**

- **2.5.1 태그 입력 및 추가:**
  - 지출 입력/수정 화면에 '태그' 입력 필드를 제공합니다.
  - `#`을 붙여 입력하거나, 띄어쓰기/쉼표로 태그를 구분합니다 (예: #업무용 #프로젝트A).
  - 기존에 사용한 태그는 자동완성으로 추천하여 일관성을 유지하도록 돕습니다.
- **2.5.2 태그 활용:**
  - 메인 목록 및 리포트 화면에서 특정 태그를 기준으로 지출 내역을 필터링하는 데 사용됩니다.

#### **2.6 사진 첨부 (Photo Attachment)**

- **2.6.1 기능:** 지출 입력/수정 화면에서 `사진 첨부` 버튼을 제공합니다.
- **2.6.2 옵션:** 버튼 클릭 시 `카메라로 촬영` 또는 `앨범에서 선택` 옵션을 제공합니다.
- **2.6.3 조회:** 첨부된 사진은 항목 상세 조회 화면에서 작은 썸네일 형태로 표시 되며, 여러 장 첨부가 가능해야 합니다. 터치 시 전체 화면으로 확대하여 볼 수 있으며 사진을 좌우 스크롤해서 넘길 수 있어야 한다.

##### **요구사항 상세 명세: 3. 특화 기능 (Specialized Features)**

**3.1 할부 관리 (Installment Management)**

단순 반복 지출과 다른 속성을 가진 할부 결제를 체계적으로 추적하고 관리하는 기능입니다.

- **3.1.1 할부 항목 생성**
  - **접근 방식:** 신규 지출 추가 시 '일반 지출'과 '할부' 유형을 선택할 수 있도록 하여, '할부' 선택 시 전용 입력 화면으로 진입합니다.
  - **전용 입력 필드:**
    - `품명 (필수)`: 구매한 상품 또는 서비스의 이름.
    - `총 원금 (필수)`: 할인이 모두 적용된 실제 결제 원금.
    - `할부 기간 (필수)`: 사용자가 두 가지 방식 중 선택하여 입력할 수 있습니다.
      - **방식 1:** `시작 년/월`과 `총 개월 수` 입력 (종료 시점 자동 계산).
      - **방식 2:** `시작 년/월`과 `종료 년/월` 입력 (총 개월 수 자동 계산).
    - `월 결제일 (필수)`: 매월 결제가 나가는 일자(1일~31일).
    - `이자 유형 (선택)`: `무이자`, `이자율(%)`, `고정 이자액` 중 선택. 기본값은 '무이자'.
    - `이자 값 (선택)`: '이자율' 또는 '고정 이자액' 선택 시 활성화되는 숫자 입력 필드.
    - `결제 카드/금융사 (선택)`: 할부 결제가 이루어지는 결제 수단 선택 또는 텍스트 입력.
- **3.1.2 월 납부액 자동 계산**
  - **기능:** 사용자가 `총 원금`, `개월 수`, `이자` 정보를 입력하면, **'월 예상 납부액(원금+이자)'**이 입력 화면 내에서 실시간으로 자동 계산되어 사용자에게 표시됩니다.
- **3.1.3 목록 및 상세 화면 표시**
  - **목록 표시:** 메인 지출 목록에서 할부 항목은 일반 지출과 구분되도록 표시됩니다.
    - `품명`, `월 납부액`과 함께 **진행 상태(`3/12회차`)**와 같은 정보를 명확하게 보여줍니다.
  - **상세 조회:** 항목 상세 화면에서는 모든 입력 정보와 함께 아래의 자동 계산된 진행 상태를 시각적으로(예: 진행률 막대) 보여줍니다.
    - `총 납부액`
    - `남은 원금`
    - `남은 개월 수`

**3.2 구독 서비스 관리 (Subscription Management)**

OTT, 멤버십 등 정기적인 구독형 서비스 관리에 특화된 기능입니다.

- **3.2.1 구독 항목 식별**
  - **기능:** 지출 항목 생성/수정 시 '구독 서비스' 토글 스위치를 제공하여 일반 고정지출과 구분하여 관리합니다.
  - **추가 필드:** '구독 서비스'로 지정 시, `서비스 플랜`(예: 프리미엄, 패밀리 요금제)을 기입할 수 있는 선택적 필드를 제공합니다.
- **3.2.2 결제일 사전 알림**
  - **기능:** 구독 항목별로 `결제일 N일 전 알림`을 설정하는 기능을 제공합니다.
  - **옵션:** `알림 없음`, `결제 당일`, `1일 전`, `3일 전`, `7일 전` 등 사용자가 직접 선택할 수 있습니다.
  - **동작:** 설정된 시점이 되면, 시스템은 사용자에게 "3일 후 넷플릭스(17,000원)가 결제됩니다."와 같은 푸시 알림을 보냅니다. (연간 구독의 경우 '1개월 전' 옵션도 유용합니다.)

**3.3 프로필 분리 (Profile Management)**

하나의 앱에서 여러 목적의 지출을 완벽하게 분리하여 관리하는 기능입니다.

- **3.3.1 프로필 관리**
  - **접근 방식:** 앱의 메인 `설정` 메뉴에 `프로필 관리` 화면을 제공합니다.
  - **기능:** `프로필 추가`, `이름 변경`, `삭제` 기능을 제공합니다.
  - **안전장치:** 프로필 삭제 시, 해당 프로필에 속한 모든 데이터가 영구적으로 삭제됨을 명확히 경고하는 확인 절차를 거칩니다.
- **3.3.2 프로필 전환**
  - **UI:** 앱의 메인 화면 상단 헤더나 사이드 메뉴 등, 사용자가 항상 쉽게 접근할 수 있는 위치에 현재 활성화된 프로필 이름(예: `개인용 ▾`)을 표시하고, 이를 탭하여 다른 프로필로 전환할 수 있는 드롭다운 목록을 제공합니다.
  - **시스템 동작:** 프로필 전환 시, 대시보드, 지출 목록, 리포트 등 앱의 모든 데이터 뷰는 선택된 프로필에 귀속된 데이터만을 표시하도록 즉시 필터링됩니다. 새로 입력하는 모든 데이터는 현재 활성화된 프로필에 자동으로 저장됩니다.

**3.4 공동 지출 분할 관리 (Shared Expense Splitting)**

월세, 관리비 등 여러 명이 함께 부담하는 비용을 관리하는 기능입니다.

- **3.4.1 입력 방식**
  - **UI:** 지출 입력 화면에 `공동 지출` 토글 스위치를 제공합니다.
  - **추가 필드:** '공동 지출' 활성화 시, 아래의 필드들이 나타납니다.
    - `총 지출액 (필수)`: 분할 전 전체 금액 (예: 월세 800,000원).
    - `나의 부담 방식 (필수)`: `비율(%)` 또는 `고정 금액(원)` 중 선택.
    - `나의 부담액 (필수)`: 선택한 방식에 따른 값 입력 (예: `50` 또는 `400,000`).
- **3.4.2 데이터 처리 및 표시**
  - **계산:** 시스템은 **'나의 부담액'**을 이 지출의 최종 금액으로 간주하고 모든 통계(대시보드, 리포트 등)에 반영합니다.
  - **목록 표시:** 메인 목록에서는 `나의 부담액`이 대표 금액으로 표시되지만, 공동 지출임을 알리는 아이콘(👥)과 함께 "총액 800,000원 중" 같은 보조 텍스트를 표시하여 명확성을 더합니다.
  - **상세 조회:** 상세 화면에서는 `총 지출액`, `나의 부담 방식`, `나의 부담액` 정보를 모두 명확하게 보여주어 내역을 쉽게 파악할 수 있도록 합니다.

##### **요구사항 상세 명세: 4. 분석 및 인사이트 (Analysis & Insights)**

**4.1 리포트 및 통계 (Reports & Statistics)**

사용자가 자신의 고정지출 패턴을 시각적으로 파악할 수 있는 전용 분석 화면입니다.

- **4.1.1 리포트 화면 구성**
  - **접근 방식:** 앱의 하단 탭 바 또는 메인 메뉴를 통해 `리포트` 전용 화면으로 진입합니다.
  - **기간 선택:** 화면 최상단에 분석할 기간을 선택하는 기능을 제공합니다.
    - **기본 옵션:** `이번 달`, `지난달`, `올해` (연초~현재), `지난해`.
    - **사용자 설정:** 사용자가 시작일과 종료일을 직접 지정할 수 있는 캘린더 선택 기능.
    - **동작:** 기간을 변경하면 아래의 모든 리포트 모듈이 해당 기간의 데이터를 기준으로 즉시 갱신됩니다.
- **4.1.2 기간별 지출 추이 분석**
  - **UI:** 시간에 따른 지출 변화를 보여주는 막대 또는 꺾은선 그래프.
  - **데이터:**
    - **연간 보기:** 선택된 연도의 1월부터 12월까지 월별 총 고정지출액을 그래프로 표시.
    - **다년간 보기:** 최근 3~5년간의 연도별 총 고정지출액을 그래프로 표시.
  - **인터랙션:** 그래프의 특정 지점(막대, 점)을 터치하면 해당 기간과 정확한 금액(예: "2025년 8월: 1,350,000원")을 팝업으로 보여줍니다.
- **4.1.3 카테고리별 지출 분석**
  - **UI:** 선택된 기간 동안의 카테고리별 지출 비중을 보여주는 수평 막대그래프 또는 도넛 차트. (항목 비교에는 막대그래프가 더 효과적입니다.)
  - **데이터:** 지출액이 가장 큰 카테고리부터 순서대로 정렬하여 `카테고리명`, `총 지출액`, `전체 대비 비중(%)`을 함께 표시합니다.
  - **인터랙션 (Drill-down):** 특정 카테고리의 막대를 터치하면, 해당 기간 동안 그 카테고리에 포함된 모든 개별 지출 항목 목록을 보여주는 상세 화면으로 이동합니다.

**4.2 지출 이상 패턴 감지 (Anomaly Detection)**

변동성이 있는 고정지출의 급격한 변화를 시스템이 능동적으로 사용자에게 알려주는 기능입니다.

- **4.2.1 감지 대상:** 사용자가 '변동성 고정지출'로 설정한 항목(예: 관리비, 통신비, 가스비 등)에 한해 동작합니다.
- **4.2.2 동작 로직:**
  - **트리거:** 사용자가 변동성 지출 항목의 이번 달 금액을 입력하고 저장하는 시점에 로직이 실행됩니다.
  - **계산:** 시스템은 해당 항목의 최근 6개월(또는 12개월) 평균 지출액을 계산합니다.
  - **조건:** 새로 입력된 금액이 기존 평균 대비 설정된 임계값(예: 20%) 이상으로 높을 경우 알림을 발동합니다.
- **4.2.3 알림 방식:**
  - 금액 저장 직후, 앱 내에서 "이번 달 관리비는 지난 6개월 평균보다 35,000원(25%) 더 높습니다. 확인해보세요." 와 같은 확인용 팝업 또는 배너를 표시합니다.

**4.3 중복/유사 구독 서비스 경고 (Duplicate Subscription Alert)**

사용자가 실수로 중복된 구독 서비스를 등록하는 것을 방지하는 기능입니다.

- **4.3.1 동작 로직:**
  - **트리거:** 사용자가 '구독 서비스' 유형으로 새 항목을 저장하는 시점에 로직이 실행됩니다.
  - **조건:** 새로 입력된 항목이 아래 조건들을 충족할 경우 경고합니다.
    1. 동일한 카테고리(예: 'OTT') 내에,
    2. 기존 항목과 매우 유사한 이름(예: "유튜브 프리미엄" vs "YouTube Premium")을 가지는 경우.
- **4.3.2 알림 방식:**
  - 저장 버튼을 누르면, "이미 유사한 이름의 구독 서비스가 있습니다. 중복된 결제가 아닌지 확인해보세요." 라는 내용의 팝업을 띄웁니다.
  - 사용자는 팝업에서 `그래도 추가` 또는 `취소`를 선택할 수 있습니다.

**4.4 가상 지출 시뮬레이션 (Virtual "What-if" Simulation)**

새로운 고정지출이 생겼을 때 재정 상태에 미치는 영향을 미리 확인해보는 가계획 기능입니다.

- **4.4.1 접근 방식:** `리포트` 탭 내에 '가상 지출 시뮬레이션' 섹션 또는 버튼을 제공합니다.
- **4.4.2 UI 및 기능:**
  - `항목명`과 `예상 금액`, `결제 주기`를 입력할 수 있는 간소화된 폼을 제공합니다.
  - `가상으로 추가` 버튼을 누르면, 현재 월 고정지출에 가상 지출이 합산된 결과가 즉시 표시됩니다.
  - **표시 정보:** `현재 고정지출`, `가상 지출 합계`, **`시뮬레이션 후 예상 고정지출`**을 명확히 구분하여 보여줍니다.
  - 여러 개의 가상 지출을 연속으로 추가하여 누적 효과를 확인할 수 있으며, `초기화` 버튼으로 모든 가상 지출을 한번에 제거할 수 있습니다.
- **4.4.3 데이터 처리:** 가상으로 추가된 항목은 시뮬레이션 화면에서만 일시적으로 사용되며, 실제 지출 데이터베이스에는 절대 저장되지 않습니다.

**4.5 검색 및 필터링 (Search & Filtering)**

메인 지출 목록 화면에서 사용자가 원하는 데이터를 빠르게 찾을 수 있도록 지원하는 기능입니다.

- **4.5.1 UI:** 목록 화면 상단에 `검색 바(Search Bar)`와 `필터 아이콘(Filter Icon)`을 항상 노출합니다.
- **4.5.2 검색 기능:**
  - 검색 바에 키워드 입력 시, `항목명`과 `메모` 내용에서 해당 키워드를 포함하는 모든 항목을 실시간으로 필터링하여 보여줍니다.
- **4.5.3 필터링 기능:**
  - 필터 아이콘 클릭 시, 아래의 조건들을 조합하여 필터링할 수 있는 별도의 화면 또는 패널을 엽니다.
    - `카테고리` (다중 선택 가능)
    - `결제 수단` (다중 선택 가능)
    - `태그` (다중 선택 가능)
    - `금액 범위` (최소-최대 금액 설정)
    - `항목 상태` (전체, 활성, 일시정지)
  - `적용` 버튼을 누르면 필터가 적용되며, 목록 상단에 현재 어떤 필터가 적용 중인지 간략히 표시해줍니다.

##### **요구사항 상세 명세: 5. 개인화 및 동기부여**

사용자가 자신의 재정 상황에 맞게 앱을 설정하고, 지출 관리에 대한 동기를 부여받아 꾸준히 사용할 수 있도록 돕는 기능 영역입니다.

**5.1 고정지출 예산 설정 (Budgeting)**

- **5.1.1 예산 설정**
  - **접근 방식:** `설정` 또는 `리포트` 화면 내에 `월 고정지출 예산 설정` 메뉴를 제공합니다.
  - **기능:** 사용자가 한 달 동안의 고정지출 총액에 대한 예산을 직접 입력하고 저장할 수 있습니다.
- **5.1.2 예산 진행 상태 표시**
  - **위치:** `대시보드`에 예산 진행 상태를 시각적으로 보여주는 위젯을 표시합니다.
  - **UI:** 진행률 막대(Progress Bar) 또는 게이지(Gauge) 차트를 활용합니다.
  - **표시 정보:**
    - 현재까지의 총 고정지출액과 설정된 예산 금액 (예: `1,150,000원 / 1,300,000원`).
    - 예산 소진율을 퍼센트(%)로 표시 (예: "예산의 88% 사용 중").
    - 소진율에 따라 진행률 막대의 색상이 점진적으로 변경됩니다 (예: 초록 → 노랑 → 빨강).
- **5.1.3 예산 초과 알림**
  - **동작:** 새로운 지출이 추가되거나 기존 지출 금액이 변경되어 월 총액이 설정된 예산을 초과하는 시점에 사용자에게 알림을 보냅니다.
  - **알림 방식:** 앱 내 팝업 또는 푸시 알림을 통해 "설정한 월 고정지출 예산을 초과했습니다."라고 알려줍니다.

**5.2 월 가용 잔액 예측 (Disposable Income Estimation)**

- **5.2.1 소득 정보 입력**
  - **접근 방식:** `설정` 내의 '내 정보' 또는 '재정 정보' 섹션에서 사용자가 선택적으로 자신의 `월 평균 소득`을 입력할 수 있도록 합니다. (개인정보 보호를 위해 선택 사항임을 명확히 안내)
- **5.2.2 가용 잔액 표시**
  - **위치:** `대시보드`에 '월 가용 잔액' 카드를 표시합니다.
  - **계산 로직:** `(입력된 월 소득) - (이번 달 총 고정지출액) = 월 가용 잔액`
  - **UI:** 계산 과정을 명확히 보여줍니다.
    - `월 소득: 3,500,000원`
    - `고정지출: -1,150,000원`
    - **`가용 잔액: 2,350,000원`**
  - **안내 문구:** "이 금액으로 생활비, 저축 등을 계획할 수 있어요." 와 같은 보조 설명을 추가하여 활용도를 높입니다.

**5.3 D-Day 및 목표 달성 (Goal Achievement)**

- **5.3.1 할부 D-Day 표시**
  - **적용 대상:** `할부`로 등록된 항목에 한해 적용됩니다.
  - **위치:** 메인 지출 목록의 할부 항목에 진행 상태를 더욱 동기부여되는 방식으로 표시합니다.
  - **UI:** 단순한 회차(`10/12회차`) 표시 대신, 할부 종료가 임박했을 때 `🎉 2회 남음!` 또는 `마지막 결제!`와 같이 시각적인 강조 효과를 줍니다.
- **5.3.2 목표 달성 축하**
  - **트리거:** 할부 항목의 마지막 회차가 '납부 완료' 처리되는 시점에 발동됩니다.
  - **UI:** 화면 전체에 "축하합니다! '아이폰 20' 할부 납부가 모두 완료되었습니다." 와 같은 메시지와 함께 색종이(Confetti)가 흩날리는 등의 애니메이션 효과를 보여주어 성취감을 극대화합니다.

**5.4 챌린지 및 업적 시스템 (Gamification)**

- **5.4.1 업적(뱃지) 시스템**
  - **기능:** 사용자의 특정 행동이나 꾸준한 활동에 대해 '뱃지' 또는 '업적'을 부여합니다.
  - **업적 종류 (예시):**
    - `첫걸음`: 첫 지출 항목 등록
    - `할부 정복자`: 첫 할부 완납
    - `구독 다이어터`: 구독 서비스 항목 1개 이상 삭제
    - `예산의 신`: 3개월 연속 예산 내 지출 달성
- **5.4.2 업적 확인 및 알림**
  - **위치:** `설정` 또는 `프로필` 화면 내에 '나의 업적' 페이지를 두어 획득한 뱃지들을 모아볼 수 있게 합니다. (획득하지 못한 뱃지는 흑백으로 표시)
  - **알림:** 새로운 업적을 달성하는 순간, "새로운 뱃지 획득: 할부 정복자!" 와 같은 작은 팝업으로 즉시 알려줍니다.

---

##### **요구사항 상세 명세: 6. 데이터 관리 (Data Management)**

사용자의 소중한 데이터를 안전하게 보관하고, 필요에 따라 외부에서 활용할 수 있도록 지원하는 기능 영역입니다.

**6.1 로컬 데이터 백업 및 복원 (Backup & Restore)**

- **6.1.1 데이터 백업**
  - **접근 방식:** `설정` > `데이터 관리` 메뉴에서 `데이터 백업하기` 버튼을 제공합니다.
  - **프로세스:**
    1. 앱 내의 모든 데이터(프로필, 지출 항목, 납부 기록, 첨부 사진 등)를 하나의 암호화된 백업 파일(`.확장자`)로 생성합니다.
    2. 디바이스의 기본 '공유하기' 또는 '파일에 저장' 기능을 호출합니다.
    3. 사용자는 생성된 파일을 자신의 휴대폰, 클라우드 드라이브(구글 드라이브, iCloud 등)에 직접 저장하거나 메일로 전송하여 보관할 수 있습니다.
- **6.1.2 데이터 복원**
  - **접근 방식:** `설정` > `데이터 관리` 메뉴에서 `데이터 복원하기` 버튼을 제공합니다.
  - **프로세스:**
    1. "복원을 진행하면 현재 앱의 모든 데이터가 백업 파일의 데이터로 덮어씌워집니다. 계속하시겠습니까?" 라는 강력한 경고 메시지를 표시합니다.
    2. 사용자가 확인하면, 디바이스의 파일 탐색기를 열어 백업 파일을 선택하도록 합니다.
    3. 앱은 선택된 파일의 유효성을 검사한 후, 데이터를 복원하고 앱을 재시작합니다.

**6.2 데이터 내보내기 (CSV Export)**

- **6.2.1 기능**
  - **목적:** 사용자가 자신의 지출 데이터를 엑셀(Excel), 구글 시트(Google Sheets) 등 스프레드시트 프로그램에서 자유롭게 분석할 수 있도록 지원합니다.
  - **접근 방식:** `설정` > `데이터 관리` 메뉴에서 `CSV로 내보내기` 버튼을 제공합니다.
- **6.2.2 내보내기 옵션**
  - **프로세스:** 내보내기 버튼 클릭 시, 데이터를 필터링할 수 있는 옵션 화면을 제공합니다.
    - `기간 선택`: 내보낼 데이터의 기간을 지정합니다.
    - `프로필 선택`: 특정 프로필의 데이터만 선택하여 내보낼 수 있습니다.
- **6.2.3 파일 생성 및 공유**
  - **CSV 컬럼:** `결제일`, `항목명`, `금액`, `카테고리`, `결제 수단`, `메모`, `태그` 등 상세 정보를 포함하는 CSV 파일을 생성합니다.
  - **공유:** 백업 기능과 마찬가지로, 생성된 CSV 파일을 사용자가 원하는 곳에 저장하거나 공유할 수 있도록 OS 기본 기능을 호출합니다.

## 🔐 범위/스코프

- 초기: 단일 사용자 가정, 서버는 기본 `profileId`(예: 1) 사용 가능
- 확장 시: 모든 주요 리소스는 `/profiles/{profileId}` 스코프 하에 동작

## 📶 오프라인 정책 (요약)

- 읽기: 마지막 성공 응답을 로컬 캐시에 보관하여 표시 (만료 시간 5~15분 권장)
- 쓰기: 낙관적 UI + 재시도 큐(백오프) 전략, 충돌 시 병합 규칙 정의
- 네트워크 복구 시: 큐 처리 후 대시보드 재동기화
